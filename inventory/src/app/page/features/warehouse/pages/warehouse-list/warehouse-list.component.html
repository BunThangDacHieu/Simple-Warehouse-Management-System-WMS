<p-toast/>

<p-button
  label="Show Warehouses"
  icon="pi pi-external-link"
  (click)="showDialog()"
></p-button>

<p-dialog
  header="Warehouse List"
  [(visible)]="dialogVisible"
  [modal]="true"
  [style]="{ width: '80vw' }"
  [contentStyle]="{ height: '70vh', overflow: 'auto' }"
>
  <div class="flex justify-end mb-2">
    <p-button
      label="Create"
      icon="pi pi-plus"
      (click)="showDialogCreate()"
    ></p-button>
  </div>

  <p-table [value]="warehouses" [tableStyle]="{ 'min-width': '50rem' }">
    <ng-template pTemplate="header">
      <tr>
        <th>Name</th>
        <th>Location</th>
        <th>Capacity</th>
        <th>Info</th>
        <th>Update</th>
        <th>Delete</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-warehouse>
      <tr>
        <td>{{ warehouse.name }}</td>
        <td>{{ warehouse.location }}</td>
        <td>{{ warehouse.capacity }}</td>
        <td>
          <p-button label="Info" (click)="showDialogInfo(warehouse)"></p-button>
        </td>
        <td>
          <p-button
            icon="pi pi-pencil"
            (click)="showDialogUpdate(warehouse)"
          ></p-button>
        </td>
        <td>
          <p-button
            icon="pi pi-trash"
            class="p-button-danger"
            (click)="deleteWarehouse(warehouse.id)"
          ></p-button>
        </td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>

<app-warehouse-detail
  [selectedWarehouse]="selectedWarehouse"
  [dialogInfoVisible]="dialogInfoVisible"
  (dialogInfoVisibleChange)="dialogInfoVisible = $event">
</app-warehouse-detail>

<app-warehouse-detail-create
  [dialogVisible]="dialogCreateVisible"
  (dialogVisibleChange)="dialogCreateVisible = $event"
  (newWarehouseCreated)="handleWarehouseCreated($event)">
</app-warehouse-detail-create>

<app-warehouse-detail-update
  [warehouse]="selectedWarehouse"
  [dialogUpdateVisible]="dialogUpdateVisible"
  (dialogUpdateVisibleChange)="dialogUpdateVisible = $event"
  (warehouseUpdated)="handleWarehouseUpdated($event)">
</app-warehouse-detail-update>
